<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns:m="http://www.w3.org/1998/Math/MathML"><head/><body><span style="padding: 0; font-family: verdana, geneva, sans-serif;font-size: 11px; line-height: 1.50em;     color: #333;  background-color: #fff;"/><html lang="en-us" xml:lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2005"/>
<meta name="DC.rights.owner" content="(C) Copyright 2005"/>
<meta name="DC.Type" content="topic"/>
<meta name="DC.Title" content="USERFUNC (ASAP Command)"/>
<meta name="abstract" content="Creates a surface specified by a user-defined function."/>
<meta name="description" content="Creates a surface specified by a user-defined function."/>
<meta name="DC.subject" content="USERFUNC (ASAP Command), surface, creating with user-defined function"/>
<meta name="keywords" content="USERFUNC (ASAP Command), surface, creating with user-defined function"/>
<meta name="DC.Relation" scheme="URI" content="../Reference/Commands_U-ref.html#Commands_and_Macros_U"/>
<meta name="DC.Relation" scheme="URI" content="../Commands/FCN_macro_ASAP-cmdref.html"/>
<meta name="DC.Relation" scheme="URI" content="../Commands/LIMITS_ASAP-cmdref.html"/>
<meta name="DC.Relation" scheme="URI" content="../Commands/LOCAL_ASAP-cmdref.html"/>
<meta name="DC.Relation" scheme="URI" content="../Commands/SCALE_ASAP-cmdref.html"/>
<meta name="DC.Relation" scheme="URI" content="../Commands/SKEW_ASAP-cmdref.html"/>
<meta name="DC.Relation" scheme="URI" content="../Commands/WAVELENGTHS_ASAP-cmdref.html"/>
<meta name="DC.Relation" scheme="URI" content="http://www.breault.com/k-base.php?kbaseID=31"/>
<meta name="DC.Relation" scheme="URI" content="http://www.breault.com/k-base.php"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="USERFUNC_ASAP_Command"/>
<link rel="stylesheet" type="text/css" href="../commonltr.css"/>
<title>USERFUNC (ASAP Command)</title>
</head>
<body id="USERFUNC_ASAP_Command"><a name="USERFUNC_ASAP_Command"><!-- --></a>


	<span style="color: #2b6eb5"><h5>USERFUNC (ASAP Command)</h5></span>
	
	
	<div><p>Creates a surface specified by a user-defined function. </p>

		<p><b>Syntax</b>
		</p>

		<pre class="codeblock">
USERFUNC [ EXPLICIT ] x y z [ fcn ] [ c  c' c" ... ]
      </pre>

		<br/><table border="0"><thead align="left"><tr style="background-color:#e8f0fb;font-family: verdana, geneva, sans-serif;font-size: 11px"><th><span>Option</span></th><th><span>Description</span></th></tr></thead><tbody><tr style="background-color:#e8f0fb;font-family: verdana, geneva, sans-serif;font-size: 11px"><td><span>x y z</span></td><td><span>global coordinates of reference point</span></td></tr><tr style="background-color:#e8f0fb;font-family: verdana, geneva, sans-serif;font-size: 11px"><td><span>EXPLICIT</span></td><td><span>explicit function</span></td></tr><tr style="background-color:#e8f0fb;font-family: verdana, geneva, sans-serif;font-size: 11px"><td><span>fcn</span></td><td><span> user-defined function (<b>$FCN</b>)</span></td></tr><tr style="background-color:#e8f0fb;font-family: verdana, geneva, sans-serif;font-size: 11px"><td><span>c c' c" ...</span></td><td><span>coefficients of function</span></td></tr></tbody></table>
		<p><b>Reference Point</b>
		</p>

		<p>As specified </p>

		<p><b>Surface Normal</b>
		</p>

		<p>As specified </p>

		<p><b>Autolimiting</b>
		</p>

		<p>No, requires LOCAL or LIMITS modifiers. </p>

		<p><b>Remarks</b>
		</p>

		<br/><a name="USERFUNC_ASAP_Command__ul_DE8543A529D648C3943EEC3E7BAEB146"><!-- --></a><ol id="USERFUNC_ASAP_Command__ul_DE8543A529D648C3943EEC3E7BAEB146">
			<li id="USERFUNC_ASAP_Command__li_3BE60ACD48F44831ABE40B769D520D80"><a name="USERFUNC_ASAP_Command__li_3BE60ACD48F44831ABE40B769D520D80"><!-- --></a>A user-programmable, implicit (f(x,y,z)=0)
				or <b>EXPLICIT</b> (f(x,y)-z=0) function with reference point x,y,z and
				double-precision coefficients. </li>

			<li id="USERFUNC_ASAP_Command__li_FBE281CD214B430A9AE74C621D74E6AC"><a name="USERFUNC_ASAP_Command__li_FBE281CD214B430A9AE74C621D74E6AC"><!-- --></a>Its value and gradient at any point (and
				wavelength) can be coded by the user in the <b>$FCN</b> named <b>fcn</b> or the Fortran function <b>USERFUNC</b>. </li>

			<li id="USERFUNC_ASAP_Command__li_100C4D5E3DDF41979C2AA08A1E6CB48E"><a name="USERFUNC_ASAP_Command__li_100C4D5E3DDF41979C2AA08A1E6CB48E"><!-- --></a>If the function is continuous in both value
				and gradient everywhere in space, then there are no restrictions on the use of this
				function in the program, except possibly the application of non-orthogonal
				transformations to it; for example,. <b>SKEW</b> or non-isotropic
					<b>SCALE</b>. </li>

			<li id="USERFUNC_ASAP_Command__li_D7045C7861894081920380556B3B3B51"><a name="USERFUNC_ASAP_Command__li_D7045C7861894081920380556B3B3B51"><!-- --></a>If the <b>fcn</b> is specified,
				then the current <b>WAVELENGTH</b> (or the associated ray/beam’s
				wavelength) is passed in the "_0" register, the local <b>x y z</b>
				coordinates are passed in the <b>_1 _2 _3</b> registers, and up to 63 coefficients
					<b>c c’ ...</b> in <b>_4 _5 ... _66</b>. </li>

			<li id="USERFUNC_ASAP_Command__li_1148E49C8ABD4986824DA5B519FD01CA"><a name="USERFUNC_ASAP_Command__li_1148E49C8ABD4986824DA5B519FD01CA"><!-- --></a> If 4 or more values are returned, then the
				last 4 entries of the executed function must be the functional value and its
				gradient vector. If only one value is returned, then it is the functional value and
				the gradient is calculated numerically using finite-differences. For example, a
				sphere of radius 10 centered about the reference point is done as follows:
				<pre class="codeblock">
$FCN SPH _1^2+_2^2+_3^2-_4^2 2*_1 2*_2 2*_3
  :
SURFACE; USERFUNC .5 0 -1 SPH 10
         </pre>
</li>

			<li id="USERFUNC_ASAP_Command__li_B3D59AF5A8E148D8B67DBC7D33CE85CE"><a name="USERFUNC_ASAP_Command__li_B3D59AF5A8E148D8B67DBC7D33CE85CE"><!-- --></a> Otherwise, the default <b>USERFUNC</b> is an aspheric conicoid with vertex at <b>x,y,z</b>
				and normal direction <b>c,c’,c".</b> The fourth and fifth coefficients
				are the vertex curvature (inverse radius) and the conic constant (0=sphere,
				-1=parabola), respectively. The remaining coefficients are for a straight polynomial
				in an offset radial distance including odd terms; that is,. the seventh coefficient
				is the linear term, the eighth is the quadratic, and so on. For example,
					<pre class="codeblock">
USERFUNC x y z 0 0 1 c k h d d’ d" ...
					</pre>
<p>
					<br/><img src="../Equations/USERFUNC_equation1.gif"/><br/>
					<br/><img src="../Equations/USERFUNC_equation1b.gif"/><br/>
				</p>
<br/><img src="../Equations/USERFUNC_equation1c.gif"/><br/><p>An exception has been implemented when the curvature <b>c</b>
					is zero; that is, </p>
<p>
					<br/><img src="../Equations/USERFUNC_equation2.gif"/><br/>
				</p>
</li>

		</ol>

		<p>
			<a href="/example_scripts.html#USERFUNC">USERFUNC Examples</a>
		</p>

	</div>

	<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="../Reference/Commands_U-ref.html#Commands_and_Macros_U" title="Topics in this section of the Contents tab include ASAP commands and macros that begin with the letter “U”.">Commands and Macros (U)</a></div>
</div>
<div class="relinfo"><strong>Related information</strong><br/>
<div><a href="../Commands/FCN_macro_ASAP-cmdref.html" title="Defines new in-line math functions.">$FCN (ASAP Macro)</a></div>
<div><a href="../Commands/LIMITS_ASAP-cmdref.html" title="Assigns a global bounding box to the object.">LIMITS (ASAP Command)</a></div>
<div><a href="../Commands/LOCAL_ASAP-cmdref.html" title="Assigns a local bounding box to the surface/function.">LOCAL (ASAP Command)</a></div>
<div><a href="../Commands/SCALE_ASAP-cmdref.html" title="Specifies arbitrary scaling of an entity.">SCALE (ASAP Command)</a></div>
<div><a href="../Commands/SKEW_ASAP-cmdref.html" title="Specifies an arbitrary skewing of an entity.">SKEW (ASAP Command)</a></div>
<div><a href="../Commands/WAVELENGTHS_ASAP-cmdref.html" title="Defines the wavelength(s) for different MEDIA and COATING definitions.">WAVELENGTH(S) (ASAP Command)</a></div>
<div><a href="http://www.breault.com/k-base.php?kbaseID=31" target="_blank">See the Knowledge Base for the technical publication, Diffraction Gratings and DOEs ASAP</a></div>
<div><a href="http://www.breault.com/k-base.php" target="_blank">Search Knowledge Base for technical publication, Diffraction Gratings and
				DOEs, at http://www.breault.com/k-base.php </a></div>
</div>
</div>

</body>
</html></body></html>