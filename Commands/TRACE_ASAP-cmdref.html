<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns:m="http://www.w3.org/1998/Math/MathML"><head/><body><span style="padding: 0; font-family: verdana, geneva, sans-serif;font-size: 11px; line-height: 1.50em;     color: #333;  background-color: #fff;"/><html lang="en-us" xml:lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2005"/>
<meta name="DC.rights.owner" content="(C) Copyright 2005"/>
<meta name="DC.Type" content="topic"/>
<meta name="DC.Title" content="TRACE (ASAP Command)"/>
<meta name="abstract" content="Traces all currently selected rays in storage."/>
<meta name="description" content="Traces all currently selected rays in storage."/>
<meta name="DC.subject" content="TRACE (ASAP Command), ray, tracing selected"/>
<meta name="keywords" content="TRACE (ASAP Command), ray, tracing selected"/>
<meta name="DC.Relation" scheme="URI" content="../Reference/Commands_T-ref.html#Commands_and_Macros_T"/>
<meta name="DC.Relation" scheme="URI" content="../Commands/OVERLAY_arg_ASAP-cmdref.html"/>
<meta name="DC.Relation" scheme="URI" content="../Commands/PROFILES_ASAP-cmdref.html"/>
<meta name="DC.Relation" scheme="URI" content="../Commands/RAY_ASAP-cmdref.html"/>
<meta name="DC.Relation" scheme="URI" content="../Commands/STATS_ASAP-cmdref.html"/>
<meta name="DC.Relation" scheme="URI" content="../Commands/WINDOW_ASAP-cmdref.html"/>
<meta name="DC.Relation" scheme="URI" content="../Reference/Plotting_Commands-ref.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="TRACE_ASAP_Command"/>
<link rel="stylesheet" type="text/css" href="../commonltr.css"/>
<title>TRACE (ASAP Command)</title>
</head>
<body id="TRACE_ASAP_Command"><a name="TRACE_ASAP_Command"><!-- --></a>


	<span style="color: #2b6eb5"><h5>TRACE (ASAP Command)</h5></span>
	
	
	<div><p>Traces all currently selected rays in storage. </p>

		<p><b>Syntax</b>
		</p>

		<pre class="codeblock">
TRACE [j j']  [STEP [k]]  [LIST [n]]  [GRAPH [n       ]] [STATS [m] ]  [KEEP]
                           DIR         PLOT       [d]     ACCUM
      </pre>

		<br/><table border="0"><thead align="left"><tr style="background-color:#e8f0fb;font-family: verdana, geneva, sans-serif;font-size: 11px"><th><span>Option</span></th><th><span>Description</span></th></tr></thead><tbody><tr style="background-color:#e8f0fb;font-family: verdana, geneva, sans-serif;font-size: 11px"><td><span>j j'</span></td><td><span>starting/stopping objects (defaults are 0 0, from all objects to all
					possible objects)</span></td></tr><tr style="background-color:#e8f0fb;font-family: verdana, geneva, sans-serif;font-size: 11px"><td><span>STEP [ k ]</span></td><td><span>number of stepped object intersections (default is -1)</span></td></tr><tr style="background-color:#e8f0fb;font-family: verdana, geneva, sans-serif;font-size: 11px"><td><span>LIST [ n ]</span></td><td><span>prints every <b>n</b>th ray object-by-object ray position data</span></td></tr><tr style="background-color:#e8f0fb;font-family: verdana, geneva, sans-serif;font-size: 11px"><td><span>DIR [ n ]</span></td><td><span>prints every <b>n</b>th ray object-by-object ray position and direction
					data</span></td></tr><tr style="background-color:#e8f0fb;font-family: verdana, geneva, sans-serif;font-size: 11px"><td><span>PLOT [ n ]</span></td><td><span>plots every <b>n</b>th ray as it is being traced </span></td></tr><tr style="background-color:#e8f0fb;font-family: verdana, geneva, sans-serif;font-size: 11px"><td><span>TRACE PLOT COLOR [ n ]</span></td><td><span>plots a trace in a color of your choice</span></td></tr><tr style="background-color:#e8f0fb;font-family: verdana, geneva, sans-serif;font-size: 11px"><td><span>GRAPH [ n ]</span></td><td><span>graphical means of monitoring ray trace, <b>n</b> is the maximum ray number
					magnitude (default is 6, that is, 1 million rays)</span></td></tr><tr style="background-color:#e8f0fb;font-family: verdana, geneva, sans-serif;font-size: 11px"><td><span>STATS [ m ]</span></td><td><span>prints ray statistics (base and up to the first <b>m</b> parabasals) for
					each model or object encountered during ray trace; handles only absorption (not
					gain media)</span></td></tr><tr style="background-color:#e8f0fb;font-family: verdana, geneva, sans-serif;font-size: 11px"><td><span>KEEP</span></td><td><span>keeps previously traced rays</span></td></tr><tr style="background-color:#e8f0fb;font-family: verdana, geneva, sans-serif;font-size: 11px"><td><span>d</span></td><td><span>distance from zero plane (see Remarks)</span></td></tr><tr style="background-color:#e8f0fb;font-family: verdana, geneva, sans-serif;font-size: 11px"><td><span>ACCUM</span></td><td><span>keeps track of ray statistics (base and up to the first <b>m</b> parabasals
					where the default is all)</span></td></tr></tbody></table>
		<p><b>Remarks</b>
		</p>

		<br/><a name="TRACE_ASAP_Command__ul_E73BB586DA2F40C59123D35B1501CA96"><!-- --></a><ol id="TRACE_ASAP_Command__ul_E73BB586DA2F40C59123D35B1501CA96">
			<li id="TRACE_ASAP_Command__li_AD9DAE5FE53A42679D5619B4634DC118"><a name="TRACE_ASAP_Command__li_AD9DAE5FE53A42679D5619B4634DC118"><!-- --></a>Uses the ray data in the virtual.pgs file
				(which is constructed when you use the <b>GRID, RAYSET, EMITTING</b>, and other ray
				initialization commands), and traces only those rays currently selected through the
				objects currently considered. During the ray trace, each ray is accessed, traced,
				and the final status of the ray is copied back to the virtual.pgs file. Upon
				completion of the ray trace, you can issue analysis commands such as <b>SPOTS,
					OPDMAP</b> and others, which in turn access the virtual.pgs file for current ray
				data. Rays traced via the <b>TRACE</b> command are therefore permanent rays. </li>

			<li id="TRACE_ASAP_Command__li_AB72F0C61DB5442C9BFBE0DCBDBE4D6F"><a name="TRACE_ASAP_Command__li_AB72F0C61DB5442C9BFBE0DCBDBE4D6F"><!-- --></a>With <b>TRACE</b> only, no output is
				typically generated except for possible ray warning messages. <b>TRACE</b> also
				lists warning summary for suppressed child rays. </li>

			<li id="TRACE_ASAP_Command__li_16F31875225B4C50AE63FCA065C879F7"><a name="TRACE_ASAP_Command__li_16F31875225B4C50AE63FCA065C879F7"><!-- --></a>Optionally, only those rays whose starting
				depth coordinate lies within a distance <b>d</b> of the zero plane are
					<b>PLOTted.</b>
			</li>

			<li id="TRACE_ASAP_Command__li_1AF0643C5B3C4D8EA21BBC641F1A190F"><a name="TRACE_ASAP_Command__li_1AF0643C5B3C4D8EA21BBC641F1A190F"><!-- --></a>Once traced, rays cannot be retraced unless
				they are reinitialized. </li>

			<li id="TRACE_ASAP_Command__li_5776192F1A25470AA55ADB4959F138E4"><a name="TRACE_ASAP_Command__li_5776192F1A25470AA55ADB4959F138E4"><!-- --></a>By default, the first ray definition
				command (for example, <b>GRID, EMIT</b>) executed after tracing
				automatically resets the ray pointer back to zero (<b>RAYS 0</b>) which
				flushes any rays. To override this behavior, use the <b>KEEP</b> option
				on the <b>TRACE</b> command. </li>

			<li id="TRACE_ASAP_Command__li_50215FB1169D4AB286CCBA3D730A0607"><a name="TRACE_ASAP_Command__li_50215FB1169D4AB286CCBA3D730A0607"><!-- --></a>Sign of <b>j'</b> or <b>k</b> determines if a refraction/reflection calculation is performed at the
				stopping object (negative <b>j'</b> or <b>k</b> turns this
				calculation off). In other words, <b>a +j'</b> or <b>+k</b> performs the optical
				transformation on the ray at the <b>OBJECT</b>; <b>-j'</b> or <b>-k</b> does not. </li>

			<li id="TRACE_ASAP_Command__li_BC24F38E38C64E88B6A5FC5A9496FD0C"><a name="TRACE_ASAP_Command__li_BC24F38E38C64E88B6A5FC5A9496FD0C"><!-- --></a>Alternatively, the rays can be STEPped
					<b>k</b> objects intersection. The sign of this entry determines
				whether one steps through the object <b>(+k)</b> or up to the object
					<b>(-k).</b>
			</li>

			<li id="TRACE_ASAP_Command__li_114001920AC547D8897346E1F98B79B2"><a name="TRACE_ASAP_Command__li_114001920AC547D8897346E1F98B79B2"><!-- --></a>The <b>PLOT</b> option plots
				the rays as they are being traced and also store their vectors on the 3D graphics
				file future plotting. </li>

			<li id="TRACE_ASAP_Command__li_D05812ADE8874A7FBE150C7CCA4367C5"><a name="TRACE_ASAP_Command__li_D05812ADE8874A7FBE150C7CCA4367C5"><!-- --></a>The progress of the ray trace can be
				monitored <b>GRAPH</b>ically on a logarithmic curve. The n in this case is the
				maximum ray number magnitude (default is six, that is, 1 million rays). </li>

			<li id="TRACE_ASAP_Command__li_13462DED0F284DCD89A66DAACB0155B5"><a name="TRACE_ASAP_Command__li_13462DED0F284DCD89A66DAACB0155B5"><!-- --></a><b>STATS</b> or <b>ACCUM</b> tracks ray statistics (base and up to the first m parabasals, where
				the default is all) for each GRIN/absorbing media, scatter model, and object
				encountered during the trace. <b>STATS</b> prints the statistics on
				completion of the trace. If scattered rays are involved, they are listed separately,
				with minus signs preceding the objects. If <b>ACCUM</b> is used, the
				same information is displayed when you issue the <b>STATS TRACE</b> command at a
				later time. Absorption inside media is also calculated. </li>

			<li id="TRACE_ASAP_Command__li_8C8D2B3E89324CB08DC308313B3DA0C5"><a name="TRACE_ASAP_Command__li_8C8D2B3E89324CB08DC308313B3DA0C5"><!-- --></a><b>TRACE LIST/DIR</b> produces the same
				output as the <b>RAY</b> command (less the effective focal length). </li>

			<li id="TRACE_ASAP_Command__li_673D0A2A831D43888C35224C20C4C98E"><a name="TRACE_ASAP_Command__li_673D0A2A831D43888C35224C20C4C98E"><!-- --></a>A typical use of the <b>TRACE PLOT</b>
				option is to plot a ray trace over a graphic; that is, <b>PROFILE OVERLAY; TRACE
					PLOT.</b> The command argument, <b>OVERLAY</b> tells ASAP not to
				issue an end of plot so that the next plot created is overlaid with the current
				plot. This is useful for combining system plots with ray trace plots (assuming that
				the <b>WINDOW</b> is the same for all plots), multiple spot diagrams,
				and so on. </li>

			<li id="TRACE_ASAP_Command__li_EE1F6694C94244929BDAF3877825B198"><a name="TRACE_ASAP_Command__li_EE1F6694C94244929BDAF3877825B198"><!-- --></a><b>WARNINGS</b> limit ends only
				current <b>TRACE</b>, not entire program. </li>

		</ol>

		<p>
			<a href="../example_scripts.html#TRACE">TRACE Examples</a>
		</p>

	</div>

<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="../Reference/Commands_T-ref.html#Commands_and_Macros_T" title="Topics in this section of the Contents tab include ASAP commands and macros that begin with the letter “T”.">Commands and Macros (T)</a></div>
</div>
<div class="relref"><strong>Related reference</strong><br/>
<div><a href="../Reference/Plotting_Commands-ref.html" title="The PLOT command is a general command for plotting virtually any aspect of system geometry and selected ray data.">Plotting Commands</a></div>
</div>
<div class="relinfo"><strong>Related information</strong><br/>
<div><a href="../Commands/OVERLAY_arg_ASAP-cmdref.html" title="Overlays plots (that is, places them on top of each other).">OVERLAY (ASAP Command Argument)</a></div>
<div><a href="../Commands/PROFILES_ASAP-cmdref.html" title="Plots slices through objects contained within the specified graphics window.">PROFILES (ASAP Command)</a></div>
<div><a href="../Commands/RAY_ASAP-cmdref.html" title="Defines and traces a single ray.">RAY (ASAP Command)</a></div>
<div><a href="../Commands/STATS_ASAP-cmdref.html" title="Lists statistics of the currently selected ray data.">STATS (ASAP Command)</a></div>
<div><a href="../Commands/WINDOW_ASAP-cmdref.html" title="Sets the plotting window for graphical output.">WINDOW (ASAP Command)</a></div>
</div>
</div>

</body>
</html></body></html>