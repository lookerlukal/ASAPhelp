<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns:m="http://www.w3.org/1998/Math/MathML"><head/><body><span style="padding: 0; font-family: verdana, geneva, sans-serif;font-size: 11px; line-height: 1.50em;     color: #333;  background-color: #fff;"/><html lang="en-us" xml:lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2005"/>
<meta name="DC.rights.owner" content="(C) Copyright 2005"/>
<meta name="DC.Type" content="topic"/>
<meta name="DC.Title" content="OPDMAP (ASAP Command)"/>
<meta name="abstract" content="Creates a geometric wavefront map of the currently selected ray data."/>
<meta name="description" content="Creates a geometric wavefront map of the currently selected ray data."/>
<meta name="DC.subject" content="OPDMAP (ASAP Command), map, geometric wavefront, ray data, creating map"/>
<meta name="keywords" content="OPDMAP (ASAP Command), map, geometric wavefront, ray data, creating map"/>
<meta name="DC.Relation" scheme="URI" content="../Reference/Commands_N_O-ref.html#Commands_and_Macros_N_O"/>
<meta name="DC.Relation" scheme="URI" content="../Commands/CLIP_ASAP-cmdref.html"/>
<meta name="DC.Relation" scheme="URI" content="../Commands/DISPLAY_ASAP-cmdref.html"/>
<meta name="DC.Relation" scheme="URI" content="../Commands/FOCUS_ASAP-cmdref.html"/>
<meta name="DC.Relation" scheme="URI" content="../Commands/MOVE_TO_FOCI_ASAP-cmdref.html"/>
<meta name="DC.Relation" scheme="URI" content="../Commands/WAVELENGTHS_ASAP-cmdref.html"/>
<meta name="DC.Relation" scheme="URI" content="../Commands/WINDOW_ASAP-cmdref.html"/>
<meta name="DC.Relation" scheme="URI" content="../Reference/Distribution_Data_Display-ref.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="OPDMAP_ASAP_Command"/>
<link rel="stylesheet" type="text/css" href="../commonltr.css"/>
<title>OPDMAP (ASAP Command)</title>
</head>
<body id="OPDMAP_ASAP_Command"><a name="OPDMAP_ASAP_Command"><!-- --></a>

 
  <span style="color: #2b6eb5"><h5>OPDMAP (ASAP Command)</h5></span> 
   
   
  <div><p>Creates a geometric wavefront map of the currently selected ray
	 data. 
  </p>
 
	 <p><b>Syntax</b> 
	 </p>
 
	 <pre class="codeblock">OPDMAP [ name ]  [ d ]  [ PSF  [ f ] ]</pre>
 
	 <br/><table border="0"><thead align="left"><tr style="background-color:#e8f0fb;font-family: verdana, geneva, sans-serif;font-size: 11px"><th><span>Option</span></th><th><span>Description</span></th></tr></thead><tbody><tr style="background-color:#e8f0fb;font-family: verdana, geneva, sans-serif;font-size: 11px"><td><span>name</span></td><td><span>name of the distribution file (default extension
			 *.dis)</span></td></tr><tr style="background-color:#e8f0fb;font-family: verdana, geneva, sans-serif;font-size: 11px"><td><span>d</span></td><td><span>specifies the sampling performed (see Remarks below) 
		  </span></td></tr><tr style="background-color:#e8f0fb;font-family: verdana, geneva, sans-serif;font-size: 11px"><td><span>PSF</span></td><td><span>flag for determination of point spread function</span></td></tr></tbody></table> 
	 <p><b>Remarks</b> 
	 </p>
 
	 <br/><a name="OPDMAP_ASAP_Command__ul_CE0EB561BE9A4DA3ABC1A9471710C2EA"><!-- --></a><ol id="OPDMAP_ASAP_Command__ul_CE0EB561BE9A4DA3ABC1A9471710C2EA"> 
		<li id="OPDMAP_ASAP_Command__li_72B6F1A6BA2A4D16A9B825E5A42842B2"><a name="OPDMAP_ASAP_Command__li_72B6F1A6BA2A4D16A9B825E5A42842B2"><!-- --></a>Produces a geometric
		  wavefront map of the ray data as contained within the plotting window specified
		  by the last 
		  <b>WINDOW</b> command. The wavefront map is stored in the
		  file, name.dis or the default file, BRO009.DAT. The data can then be
		  manipulated and plotted using the 
		  <b>DISPLAY</b> commands. 
		</li>
 
		<li id="OPDMAP_ASAP_Command__li_FB99B84ABCF248DE9CC145F4DA09E4EA"><a name="OPDMAP_ASAP_Command__li_FB99B84ABCF248DE9CC145F4DA09E4EA"><!-- --></a>The geometric wavefront map
		  is determined by interpolating the optical path length data (of the first
		  source encountered in the current ray set). In the process, the average OPD
		  value (piston) is removed. You may remove focus and tilt errors by preceding
		  OPDMAP with a 
		  <b>FOCUS MOVE</b> or<b> MOVE TO</b> command. 
		</li>
 
		<li id="OPDMAP_ASAP_Command__li_456D5CA986BA49889651D4B4820AF7FD"><a name="OPDMAP_ASAP_Command__li_456D5CA986BA49889651D4B4820AF7FD"><!-- --></a>If 
		  <b>d</b> is entered as zero, ASAP generates a fast discrete
		  map of the wavefront with no interpolation. 
		</li>
 
		<li id="OPDMAP_ASAP_Command__li_DE79BB120A754FFAA399B363C877CB3E"><a name="OPDMAP_ASAP_Command__li_DE79BB120A754FFAA399B363C877CB3E"><!-- --></a>Otherwise, ASAP uses a very
		  general (and somewhat slower) linear interpolation (no extrapolation) technique
		  that considers only a small set of ray points within a distance 
		  <b>d</b> (default is three times the mallest ray
		  separation) of each grid point. 
		</li>
 
		<li id="OPDMAP_ASAP_Command__li_2BEC958F4EE94B719A1B4CBBB9E08ABE"><a name="OPDMAP_ASAP_Command__li_2BEC958F4EE94B719A1B4CBBB9E08ABE"><!-- --></a>If a 
		  <b>WAVELENGTH</b> has been set and 
		  <b>d</b> is nonzero, ASAP forms the complex geometrical
		  pupil function from the interpolated OPD map and stores its Fourier Transform
		  (that is, the coherent PSF) on unit 29 (BRO029.DAT). The 
		  <b>f</b> controls how much of the PSF to return. If it is
		  less than one, it is a fractional energy (relative to the maximum) cutoff. If
		  greater than one, it is the maximum distance in Airy units (default 5). This
		  PSF is normalized relative to an ideal circular aperture of equivalent area. A 
		  <b>DISPLAY 29 ENERGY</b> command can then be used to
		  manipulate and plot this far-field distribution. 
		</li>
 
		<li id="OPDMAP_ASAP_Command__li_25F8DD0276DA4BDCAFDD87A49E1C2884"><a name="OPDMAP_ASAP_Command__li_25F8DD0276DA4BDCAFDD87A49E1C2884"><!-- --></a><b>OPDMAP</b>
		  should not be used at focus or within a caustic; the calculation is not
		  relevant there. Instead, use the 
		  <b>FOCUS MOVE</b> or 
		  <b>MOVE TO SPHERE</b> commands to move the ray data to an
		  appropriate reference sphere (located well away from focus, the exit pupil is a
		  traditional location) before issuing the 
		  <b>OPDMAP</b> command. 
		</li>
 
		<li id="OPDMAP_ASAP_Command__li_8A5DBEA593354CAB9A04E7ED6A59B506"><a name="OPDMAP_ASAP_Command__li_8A5DBEA593354CAB9A04E7ED6A59B506"><!-- --></a>The command argument, 
		  <b>CLIP</b> can be used to specify an object 
		  <b>(i)</b> or edge number 
		  <b>(j)</b> whose bounds and limits clips the distribution.
		  If i is not given, it is defaulted to the current object number of the first
		  valid ray. If 
		  <b>j</b> is negative the interior of the closed edge is
		  used, if 
		  <b>j</b> is positive, the exterior of the closed edge is
		  used. 
		</li>
 
	 </ol>
 
	 <p> 
		<a href="../example_scripts.html#OPDMAP">OPDMAP
		  Examples</a> 
	 </p>
 
  </div>
 
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="../Reference/Commands_N_O-ref.html#Commands_and_Macros_N_O" title="Topics in this section of the Contents tab include ASAP commands and macros that begin with the letter “N-O”.">Commands and Macros (N-O)</a></div>
</div>
<div class="relref"><strong>Related reference</strong><br/>
<div><a href="../Reference/Distribution_Data_Display-ref.html" title="Many analysis commands (SPOTS, OPDMAP and others) create distribution data files. These files contain matrices of various forms of data (flux data, optical path difference data and others) and are stored on disk in binary format for efficiency as they can become quite large.">Distribution Data Display</a></div>
</div>
<div class="relinfo"><strong>Related information</strong><br/>
<div><a href="../Commands/CLIP_ASAP-cmdref.html" title="Specifies positional or directional ray limiting or clipping boxes.">CLIP (ASAP Command)</a></div>
<div><a href="../Commands/DISPLAY_ASAP-cmdref.html" title="Reads previously created distribution data files so that they can be modified.">DISPLAY (ASAP Command)</a></div>
<div><a href="../Commands/FOCUS_ASAP-cmdref.html" title="Determines the best 3D focal point of currently selected ray data.">FOCUS (ASAP Command)</a></div>
<div><a href="../Commands/MOVE_TO_FOCI_ASAP-cmdref.html" title="Moves rays or beams along the propagation direction to a focus with the given parabasal rays and the base ray.">MOVE TO FOCI (ASAP Command)</a></div>
<div><a href="../Commands/WAVELENGTHS_ASAP-cmdref.html" title="Defines the wavelength(s) for different MEDIA and COATING definitions.">WAVELENGTH(S) (ASAP Command)</a></div>
<div><a href="../Commands/WINDOW_ASAP-cmdref.html" title="Sets the plotting window for graphical output.">WINDOW (ASAP Command)</a></div>
</div>
</div>

</body>
</html></body></html>