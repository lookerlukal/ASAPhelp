<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns:m="http://www.w3.org/1998/Math/MathML"><head/><body><span style="padding: 0; font-family: verdana, geneva, sans-serif;font-size: 11px; line-height: 1.50em;     color: #333;  background-color: #fff;"/><html lang="en-us" xml:lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2005"/>
<meta name="DC.rights.owner" content="(C) Copyright 2005"/>
<meta name="DC.Type" content="topic"/>
<meta name="DC.Title" content="FIELDBPM (ASAP Command)"/>
<meta name="abstract" content="Field propagation through small geometries and inhomogeneous media."/>
<meta name="description" content="Field propagation through small geometries and inhomogeneous media."/>
<meta name="DC.subject" content="FIELDBPM (ASAP Command), propagation, field, inhomogeneous media, field propagation, geometries, field propagation"/>
<meta name="keywords" content="FIELDBPM (ASAP Command), propagation, field, inhomogeneous media, field propagation, geometries, field propagation"/>
<meta name="DC.Relation" scheme="URI" content="../Commands/FIELD_ASAP-cmdref.html"/>
<meta name="DC.Relation" scheme="URI" content="../Commands/FIELDSUM_ASAP-cmdref.html"/>
<meta name="DC.Relation" scheme="URI" content="../Commands/INTERFACE_ASAP-cmdref.html"/>
<meta name="DC.Relation" scheme="URI" content="../Concept/Options_in_Command_Syntax-conc.html"/>
<meta name="DC.Relation" scheme="URI" content="http://www.breault.com/k-base.php"/>
<meta name="DC.Relation" scheme="URI" content="http://www.breault.com/k-base.php"/>
<meta name="DC.Relation" scheme="URI" content="../Reference/Commands_F-ref.html"/>
<meta name="DC.Relation" scheme="URI" content="http://www.breault.com/k-base.php"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="FIELDBPM_ASAP_Command"/>
<link rel="stylesheet" type="text/css" href="../commonltr.css"/>
<title>FIELDBPM (ASAP Command)</title>
</head>
<body id="FIELDBPM_ASAP_Command"><a name="FIELDBPM_ASAP_Command"><!-- --></a>


	<span style="color: #2b6eb5"><h5>FIELDBPM (ASAP Command)</h5></span>
	
	
	<div><p>Field propagation through small geometries and inhomogeneous media. </p>

		<p><b>Syntax</b>
		</p>

		<pre class="codeblock">
FIELDBPM u   component  [ d     [ n ] ]   [ BC [ i [ i' ] ] ] ...options
        n.e               f  f'               i j    i' j'
      </pre>

		<br/><table border="0"><thead align="left"><tr style="background-color:#e8f0fb;font-family: verdana, geneva, sans-serif;font-size: 11px"><th><span>Option</span></th><th><span>Description</span></th></tr></thead><tbody><tr style="background-color:#e8f0fb;font-family: verdana, geneva, sans-serif;font-size: 11px"><td><span>u</span></td><td><span>complex distribution file number</span></td></tr><tr style="background-color:#e8f0fb;font-family: verdana, geneva, sans-serif;font-size: 11px"><td><span>n</span></td><td><span>number of intermediate locations</span></td></tr><tr style="background-color:#e8f0fb;font-family: verdana, geneva, sans-serif;font-size: 11px"><td><span>n.e</span></td><td><span>complex distribution file name</span></td></tr><tr style="background-color:#e8f0fb;font-family: verdana, geneva, sans-serif;font-size: 11px"><td><span>f f'</span></td><td><span> depth coordinate information used to determine the grid</span></td></tr><tr style="background-color:#e8f0fb;font-family: verdana, geneva, sans-serif;font-size: 11px"><td><span>i j, i' j'</span></td><td><span>one or both directions of the computational window</span></td></tr><tr style="background-color:#e8f0fb;font-family: verdana, geneva, sans-serif;font-size: 11px"><td><span>d</span></td><td><span>distance in the depth direction</span></td></tr><tr style="background-color:#e8f0fb;font-family: verdana, geneva, sans-serif;font-size: 11px"><td><span>BC</span></td><td><span>boundary condition</span></td></tr><tr style="background-color:#e8f0fb;font-family: verdana, geneva, sans-serif;font-size: 11px"><td><span>...options</span></td><td><span>See Options in Command Syntax</span></td></tr></tbody></table>
		<p><b>Remarks</b>
		</p>

		<br/><a name="FIELDBPM_ASAP_Command__ul_194CF2B20D3C4230B313463F595C52C4"><!-- --></a><ol id="FIELDBPM_ASAP_Command__ul_194CF2B20D3C4230B313463F595C52C4">
			<li id="FIELDBPM_ASAP_Command__li_C7AC087C460542D29C1E947C3A4B4790"><a name="FIELDBPM_ASAP_Command__li_C7AC087C460542D29C1E947C3A4B4790"><!-- --></a><b>FIELDBPM</b> is the second
				version of the <b>FIELD</b> command that does not use any of the current
				ray/beam data. </li>

			<li id="FIELDBPM_ASAP_Command__li_44759C627E3741A293F6D6DCD8E223C4"><a name="FIELDBPM_ASAP_Command__li_44759C627E3741A293F6D6DCD8E223C4"><!-- --></a>Takes the field stored in the complex
				distribution file number <b>u</b> or name (with extension) <b>n.e,</b> and propagates it a distances <b>d</b> (or from <b>f to f')</b> in the depth direction by directly solving the partial
				differential harmonic wave equation (the scalar or semi-vectorial Helmholtz
				equation). </li>

			<li id="FIELDBPM_ASAP_Command__li_97B58FB69F274328902D057D5A64C627"><a name="FIELDBPM_ASAP_Command__li_97B58FB69F274328902D057D5A64C627"><!-- --></a>The <b>n</b> is the number of
				equally spaced, intermediate propagation locations, at which the field distributions
				are written to the default binary files (BRO009.DAT and BRO029.DAT). The default is
				zero; that is, only the final location. </li>

			<li id="FIELDBPM_ASAP_Command__li_CBECCAF216A74F1C9441F0E0F28BA6C5"><a name="FIELDBPM_ASAP_Command__li_CBECCAF216A74F1C9441F0E0F28BA6C5"><!-- --></a>A unique Finite Difference Beam Propagation
				Method (FD-BPM) technique is used, which is not only fast and accurate, but
				automatically determines the best reference refractive index and axial step size for
				the given media and lateral sampling. </li>

			<li id="FIELDBPM_ASAP_Command__li_15436F77080045BDAC2F74730ADA8C3F"><a name="FIELDBPM_ASAP_Command__li_15436F77080045BDAC2F74730ADA8C3F"><!-- --></a>The field is assumed to start entirely
				within the current <b>IMMERSE</b> medium, but will then interact with
				any other media it encounters. All media can be complex (<b>ABSORB</b>ing), inhomogeneous (<b>GRIN</b>), and birefringent
					(<b>CRYSTAL</b> if the optical axis is parallel to one of the global
				coordinate axes). </li>

			<li id="FIELDBPM_ASAP_Command__li_BCDEEBF673CF426EA6DCDFBDCD4D2B01"><a name="FIELDBPM_ASAP_Command__li_BCDEEBF673CF426EA6DCDFBDCD4D2B01"><!-- --></a>Any object geometry (including surfaces
				imported via CAD) can act as interfaces between the media, but the actual reflection
				and transmission coefficients of these objects are ignored. </li>

			<li id="FIELDBPM_ASAP_Command__li_DB72170004F449828720DE4F6FA86011"><a name="FIELDBPM_ASAP_Command__li_DB72170004F449828720DE4F6FA86011"><!-- --></a>Whenever possible, order the media on each
				object's <b>INTERFACE</b> command so that the first media is before the
				surface and the second is after (relative to the positive X, Y, or Z depth axis
				direction). Also, the two <b>INTERFACE</b> media entries must be
				separated by only a single comma , to indicate that there is a preferred order to
				them. This separator permits nearly all "MEDIA mismatch" errors to be fixed quickly
				and automatically. </li>

			<li id="FIELDBPM_ASAP_Command__li_A928A36933AB413E9DA656780FE58BB9"><a name="FIELDBPM_ASAP_Command__li_A928A36933AB413E9DA656780FE58BB9"><!-- --></a> To prevent spurious "numerical"
				reflections at the edge of the computational window, a physical (BC option absent)
				or numerical (<b>BC</b> option alone) absorbing region is implemented by
				default that involves the outer 1/6 pixels at each edge of the window (that is, a
				total of 1/3 of the pixels in each lateral direction). Otherwise, the following
				explicit boundary conditions can be specified with the BC option for one (<b>i</b>) or both (<b>ij</b>) directions of the computational window
				(unprimed entries first end of window, primed second): <br/><table border="0"><thead align="left"><tr style="background-color:#e8f0fb;font-family: verdana, geneva, sans-serif;font-size: 11px"><th><span>BC</span></th><th><span>Description</span></th></tr></thead><tbody><tr style="background-color:#e8f0fb;font-family: verdana, geneva, sans-serif;font-size: 11px"><td><span>&lt;-1</span></td><td><span>Number of pixels in physically absorbing band</span></td></tr><tr style="background-color:#e8f0fb;font-family: verdana, geneva, sans-serif;font-size: 11px"><td><span>-1</span></td><td><span>Periodic</span></td></tr><tr style="background-color:#e8f0fb;font-family: verdana, geneva, sans-serif;font-size: 11px"><td><span>0</span></td><td><span>Zero field</span></td></tr><tr style="background-color:#e8f0fb;font-family: verdana, geneva, sans-serif;font-size: 11px"><td><span>1</span></td><td><span>Totally reflective (zero derivative)</span></td></tr><tr style="background-color:#e8f0fb;font-family: verdana, geneva, sans-serif;font-size: 11px"><td><span>&gt;1</span></td><td><span>Number of pixels in each numerically absorbing band</span></td></tr></tbody></table></li>

			<li id="FIELDBPM_ASAP_Command__li_A1DAF693F20B48B0BA7EAC72435AC5CF"><a name="FIELDBPM_ASAP_Command__li_A1DAF693F20B48B0BA7EAC72435AC5CF"><!-- --></a>The normally integer is and js can also be
				entered as floating point fractions of the number of samples in the respective
				direction. </li>

			<li id="FIELDBPM_ASAP_Command__li_C89840F9BBDC4A0B87DC5DAD831CC53A"><a name="FIELDBPM_ASAP_Command__li_C89840F9BBDC4A0B87DC5DAD831CC53A"><!-- --></a> The specific BPM algorithm used is capable
				of operating outside the normal "paraxial" region (small departures from the
				factored plane wave) because it expands the lateral differential operator into
				higher order terms. The order number is controlled by the current <b>ACCURACY</b> setting and the possibilities are listed (from fastest to
				slowest) below: <br/><table border="0"><thead align="left"><tr style="background-color:#e8f0fb;font-family: verdana, geneva, sans-serif;font-size: 11px"><th><span>ACCURACY setting</span></th><th><span>Operator Order</span></th><th><span>Max Angle from Axis</span></th><th><span>Comments</span></th></tr></thead><tbody><tr style="background-color:#e8f0fb;font-family: verdana, geneva, sans-serif;font-size: 11px"><td><span>LOW</span></td><td><span>1</span></td><td><span>10</span></td><td><span>Fresnel/paraxial/weakly-guided approximation</span></td></tr><tr style="background-color:#e8f0fb;font-family: verdana, geneva, sans-serif;font-size: 11px"><td><span>MEDIUM</span></td><td><span>2</span></td><td><span>20 </span></td><td><span/></td></tr><tr style="background-color:#e8f0fb;font-family: verdana, geneva, sans-serif;font-size: 11px"><td><span>HIGH</span></td><td><span>3</span></td><td><span>40</span></td><td><span>Wide-angle and/or large refractive index variations</span></td></tr></tbody></table></li>

			<li id="FIELDBPM_ASAP_Command__li_7B28B84163504DAABE6E7AC92FD8B459"><a name="FIELDBPM_ASAP_Command__li_7B28B84163504DAABE6E7AC92FD8B459"><!-- --></a>Besides the obvious current restriction to
				scalar (non-vector) fields, there is also a basic limitation inherent in the BPM
				method: it tracks only the "forward" propagating component of the field, and thus
				ignores back-reflected waves and any flux lost to them. This means that it does a
				good job of predicting the relative shape and phase of the main field, but not
				necessarily the absolute magnitude. </li>

			<li id="FIELDBPM_ASAP_Command__li_B8EFF44AF20349C18BD8097C6FB1E2FE"><a name="FIELDBPM_ASAP_Command__li_B8EFF44AF20349C18BD8097C6FB1E2FE"><!-- --></a>The advantage of the BPM method is that it
				relatively efficient at propagating wavefields through three-dimensional volumes,
				versus a more rigorous Time-Domain (TD) method that is essentially four-dimensional
				and thus orders of magnitude slower for the same size problem. </li>

			<li id="FIELDBPM_ASAP_Command__li_4FD5A9B2946D44E9A8ECEC9198B852EB"><a name="FIELDBPM_ASAP_Command__li_4FD5A9B2946D44E9A8ECEC9198B852EB"><!-- --></a>The accuracy of the calculation is most
				directly affected by the lateral sampling used; that is, the number of <b>PIXELS</b> for a given size <b>WINDOW</b>. Many problems
				require sub-wavelength sampling, which means that we are practically limited to
				small volumes. A good rule of thumb is to use a sample spacing of one-third of the
				shortest wavelength (the vacuum wavelength divided by the highest index in the
				volume). Some problems may allow coarser sampling, while others require finer
				sampling. The best indicator of accuracy is the two numbers displayed under the
				"Relative Flux" heading during the propagation. For a non-absorbing (actual and/or
				numerical) problem, the closer these numbers stay to unity during the entire
				propagation, the more accurate the final result. To reduce their fluctuation,
				decrease the lateral sample size (for example, increase the number of <b>PIXELS</b>). Be careful though, the number of longitudinal steps required
				may increase dramatically along with run times. </li>

			<li id="FIELDBPM_ASAP_Command__li_89421A32F4E94CE786D0FF7E664710D2"><a name="FIELDBPM_ASAP_Command__li_89421A32F4E94CE786D0FF7E664710D2"><!-- --></a> As with virtually all types of numerical
				simulations, there is a tradeoff between speed and accuracy. BRO recommends that the
				optimum sampling for a given problem be found first with a fast two-dimensional
				version (negligible width in second <b>WINDOW</b> direction) before
				proceeding to the full three-dimensional calculation. For three-dimensional problems
				with cylindrical symmetry, a fast, radially symmetric calculation can be done by
				using the following command sequence:
					<pre class="codeblock">
WINDOW Y 0 rmax X -tiny tiny
FIELD ENERGY ... 		      !create 1D starting field
AXIS Z
FIELD 29 ENERGY dist ... 	!propagate a distance
         </pre>
<p>where, in this example, Z is the symmetry and propagation axis </p>
</li>

		</ol>

		<p>
			<a href="../example_scripts.html#FIELDBPM">FIELDBPM Examples</a>
		</p>

	</div>

	<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="../Reference/Commands_F-ref.html" title="Topics in this section of the Contents tab include ASAP commands and macros that begin with the letter “F”.">Commands and Macros (F)</a></div>
</div>
<div class="relconcepts"><strong>Related concepts</strong><br/>
<div><a href="../Concept/Options_in_Command_Syntax-conc.html" title="ASAP commands include a commands that are actually &#34;options&#34; that are used only with other commands, and not alone. When you see the designation ... options in a command syntax, usually any of the following commands can be used in its place:">Options in Command Syntax</a></div>
</div>
<div class="relinfo"><strong>Related information</strong><br/>
<div><a href="../Commands/FIELD_ASAP-cmdref.html" title="Calculates the exact complex field distribution.">FIELD (ASAP Command)</a></div>
<div><a href="../Commands/FIELDSUM_ASAP-cmdref.html" title="Sums coherent beams.">FIELDSUM (ASAP Command)</a></div>
<div><a href="../Commands/INTERFACE_ASAP-cmdref.html" title="Assigns a reflective, refractive or diffractive interface to objects.">INTERFACE (ASAP Command)</a></div>
<div><a href="http://www.breault.com/k-base.php" target="_blank">Search Knowledge Base for technical publication, Scattering in ASAP</a></div>
<div><a href="http://www.breault.com/k-base.php" target="_blank">Search Knowledge Base for technical publication, Wave Optics in ASAP</a></div>
<div><a href="http://www.breault.com/k-base.php" target="_blank">Search Knowledge Base for technical publications, Scattering in ASAP, and Wave
				Optics in ASAP, at http://www.breault.com/k-base.php </a></div>
</div>
</div>

</body>
</html></body></html>