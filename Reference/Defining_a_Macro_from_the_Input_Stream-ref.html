<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns:m="http://www.w3.org/1998/Math/MathML"><head/><body><span style="padding: 0; font-family: verdana, geneva, sans-serif;font-size: 11px; line-height: 1.50em;     color: #333;  background-color: #fff;"/><html lang="en-us" xml:lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2005"/>
<meta name="DC.rights.owner" content="(C) Copyright 2005"/>
<meta name="DC.Type" content="reference"/>
<meta name="DC.Title" content="Defining a Macro from the Input Stream"/>
<meta name="abstract" content="Instead of defining macros in the library file, you can create individual macro files directly from the input stream. There are two formats, a short or long, respectively:"/>
<meta name="description" content="Instead of defining macros in the library file, you can create individual macro files directly from the input stream. There are two formats, a short or long, respectively:"/>
<meta name="DC.Relation" scheme="URI" content="../Concept/ASAP_Macro_Language-conc.html"/>
<meta name="DC.Relation" scheme="URI" content="../Reference/Calling_a_Macro-ref.html#Calling_a_Macro"/>
<meta name="DC.Relation" scheme="URI" content="../Concept/Internally_Defined_Macros-conc.html#Internally_Defined_Macros"/>
<meta name="DC.Relation" scheme="URI" content="../Reference/User_Defined_Macros-ref.html#User_Defined_Macros"/>
<meta name="DC.Relation" scheme="URI" content="../Task/Increasing_Macro_Command_Execution_Speed-task.html#Increasing_Macro_Command_Execution_Speed"/>
<meta name="DC.Relation" scheme="URI" content="../Reference/Creating_a_Macro_Library_File-ref.html"/>
<meta name="DC.Relation" scheme="URI" content="../Reference/Sharing_Library_Files-ref.html#Sharing_Library_Files"/>
<meta name="DC.Relation" scheme="URI" content="../Commands/CASE_macro_ASAP-cmdref.html"/>
<meta name="DC.Relation" scheme="URI" content="../Concept/Building_the_Geometry-conc.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="Defining_a_Macro_from_the_Input_Stream"/>
<link rel="stylesheet" type="text/css" href="../commonltr.css"/>
<title>Defining a Macro from the Input Stream</title>
</head>
<body id="Defining_a_Macro_from_the_Input_Stream"><a name="Defining_a_Macro_from_the_Input_Stream"><!-- --></a>


	<span style="color: #2b6eb5"><h5>Defining a Macro from the Input Stream</h5></span>
	
	<div><p>Instead of defining macros in the library file, you can create individual macro files directly from the input stream. There are two formats, a short or long, respectively:</p>
	
		<div class="section" id="Defining_a_Macro_from_the_Input_Stream__section_47BF9F135AF24C718F4D390338495D09"><a name="Defining_a_Macro_from_the_Input_Stream__section_47BF9F135AF24C718F4D390338495D09"><!-- --></a><span style="color: #2b6eb5"><h5>Short Syntax</h5></span>
			
			<pre class="codeblock">
name { [ n ] [ description ]
:
definition records
:
   }
</pre>
</div>

	<div class="section" id="Defining_a_Macro_from_the_Input_Stream__section_80920646983C4C479896DA3B012AB069"><a name="Defining_a_Macro_from_the_Input_Stream__section_80920646983C4C479896DA3B012AB069"><!-- --></a><span style="color: #2b6eb5"><h5>Long Syntax</h5></span>
		
		<pre class="codeblock">
$$name m [ n ] ...
$&amp; label
&amp;$
&amp;&amp;
   :
  m records in macro definition or until "label" literal record reached
   :
[label]
	</pre>
</div>

	<div class="section" id="Defining_a_Macro_from_the_Input_Stream__section_09DFA4B1A17841768B18AB91859E3EFD"><a name="Defining_a_Macro_from_the_Input_Stream__section_09DFA4B1A17841768B18AB91859E3EFD"><!-- --></a><span style="color: #2b6eb5"><h5>Remarks</h5></span>
		
		<br/><a name="Defining_a_Macro_from_the_Input_Stream__ul_17B74067788A484AB9EC780E0FA543B8"><!-- --></a><ul id="Defining_a_Macro_from_the_Input_Stream__ul_17B74067788A484AB9EC780E0FA543B8">
			<li id="Defining_a_Macro_from_the_Input_Stream__li_596DD6FC4B4949C091234283B01D4401"><a name="Defining_a_Macro_from_the_Input_Stream__li_596DD6FC4B4949C091234283B01D4401"><!-- --></a>Long format macro definitions can be created from the input stream by prefixing the name with two macro prefix characters and entering on successive records the m records in the definition. </li>

			<li id="Defining_a_Macro_from_the_Input_Stream__li_9597D86C7BDB42AB848525236CB6DB49"><a name="Defining_a_Macro_from_the_Input_Stream__li_9597D86C7BDB42AB848525236CB6DB49"><!-- --></a>An alternative to specifying the integer number of records m in advance is to use a record starting with the given literal (for example, "_") after the last definition record (and before the n argument prompt definitions). The first prefix character determines whether the macro is defined and executed ($), or just defined (&amp;). As usual the second character determines whether the individual records in the macro are displayed ($) or not (&amp;).</li>

		</ul>

		<br/><table border="0"><thead align="left"/><tbody><tr style="background-color:#e8f0fb;font-family: verdana, geneva, sans-serif;font-size: 11px"><td><span>Prefix</span></td><td><span>Action</span></td></tr><tr style="background-color:#e8f0fb;font-family: verdana, geneva, sans-serif;font-size: 11px"><td><span>$$</span></td><td><span>Define, execute, and echo</span></td></tr><tr style="background-color:#e8f0fb;font-family: verdana, geneva, sans-serif;font-size: 11px"><td><span>$&amp;</span></td><td><span>Define and execute</span></td></tr><tr style="background-color:#e8f0fb;font-family: verdana, geneva, sans-serif;font-size: 11px"><td><span>&amp;$</span></td><td><span>Define and echo</span></td></tr><tr style="background-color:#e8f0fb;font-family: verdana, geneva, sans-serif;font-size: 11px"><td><span>&amp;&amp;</span></td><td><span>Just define</span></td></tr></tbody></table>
		<p>For example, to simply define a macro NAME using a meaningful label:</p>

		<pre class="codeblock">
&amp;&amp;NAME EOM
:
EOM
</pre>

	<br/><a name="Defining_a_Macro_from_the_Input_Stream__ul_7C2D7B55F17B4202A71CD8777D0EACF0"><!-- --></a><ul id="Defining_a_Macro_from_the_Input_Stream__ul_7C2D7B55F17B4202A71CD8777D0EACF0">
		<li id="Defining_a_Macro_from_the_Input_Stream__li_0791A4D996E04F3885C7BDE16104CB43"><a name="Defining_a_Macro_from_the_Input_Stream__li_0791A4D996E04F3885C7BDE16104CB43"><!-- --></a>As opposed to $GO and $ERR, "label" in this context must be in the currently acceptable case (see $CASE). The above syntax can also be in short format as follows:</li>

	</ul>

	<pre class="codeblock">
NAME {

:

}	
</pre>

	</div>

	</div>
 
	
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="../Concept/ASAP_Macro_Language-conc.html">ASAP Macro Language</a></div>
</div>
<div class="relconcepts"><strong>Related concepts</strong><br/>
<div><a href="../Concept/Internally_Defined_Macros-conc.html#Internally_Defined_Macros" title="The internally defined macros are contained within the parser (and therefore are always available). These macros give the program looping, input/output redirection, conditional (IF) processing, branching, and other advanced capabilities. Internally defined macros may be used freely in both user-defined macros and general input commands and may appear more than once in a given record.">Internally Defined Macros</a></div>
<div><a href="../Concept/Building_the_Geometry-conc.html" title="Using ASAP, you build optical system models by first creating optical property and system geometry databases.">Building the Geometry</a></div>
</div>
<div class="reltasks"><strong>Related tasks</strong><br/>
<div><a href="../Task/Increasing_Macro_Command_Execution_Speed-task.html#Increasing_Macro_Command_Execution_Speed">Increasing Macro Command Execution Speed</a></div>
</div>
<div class="relref"><strong>Related reference</strong><br/>
<div><a href="../Reference/Calling_a_Macro-ref.html#Calling_a_Macro" title="A macro command is unformatted like all other commands. There can be only one user macro command per input record and it should be the last command on the record. The first entry of a macro command is either a dollar sign &#34;$&#34; or ampersand &#34;&amp;&#34; followed immediately by the macro name. The name can be of any length but only the first 32 characters are significant. The dollar sign &#34;$&#34; causes the program to print the commands in the macro definition after the variables have been replaced by their corresponding arguments. Only the macro command itself is printed when the ampersand &#34;&amp;&#34; is used.">Calling a Macro</a></div>
<div><a href="../Reference/User_Defined_Macros-ref.html#User_Defined_Macros" title="User-defined macros can be defined and used within an ASAP input file (*.INR) or defined and placed within a macro library for later use. In either case the syntax is the same.">User-Defined Macros</a></div>
<div><a href="../Reference/Creating_a_Macro_Library_File-ref.html" title="Multiple macro definitions are stored in a library on logical unit 24 by default. Definitions may be created either directly by an ASCII editor or during the decoding of the input by the program.">Creating a Macro Library File</a></div>
<div><a href="../Reference/Sharing_Library_Files-ref.html#Sharing_Library_Files" title="In environments where multiple engineers work together, you may want to share ASAP library files (*.LIB). If the PC's running ASAP are connected via a LAN, two methods in which LIB files can be shared enable you to modify a LIB file so that other staff can use the information.">Sharing Library Files</a></div>
</div>
<div class="relinfo"><strong>Related information</strong><br/>
<div><a href="../Commands/CASE_macro_ASAP-cmdref.html" title="Specifies case sensitivity.">$CASE (ASAP Macro)</a></div>
</div>
</div>

</body>
</html></body></html>